(this["webpackJsonpreact-graphql"]=this["webpackJsonpreact-graphql"]||[]).push([[0],{33:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n,r,s,i=a(27),l=a.n(i),c=a(7),o=a(0),d=(a(33),a(5)),m=a.n(d),u=a(14),p=a(6),h=a(45),b=a(11),j=a(2),x=function(e){var t=e.setId,a=e.setOpenEditModal,r=e.setOpenCreateModal,s=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.request(Object(b.gql)(n||(n=Object(u.a)(["{\n      getClients {\n        id\n        firstName\n        lastName\n        phone\n        avatarUrl\n        }\n    }"]))));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=Object(h.a)("clients",s),l=i.status,c=i.data;return"loading"===l?Object(j.jsx)("div",{children:"loading..."}):"error"===l?Object(j.jsx)("div",{children:"error"}):Object(j.jsx)("div",{className:"flex flex-col w-full",children:Object(j.jsx)("div",{className:"-my-2 py-2 sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8",children:Object(j.jsx)("div",{className:"align-middle inline-block min-w-full shadow sm:rounded-lg border-b border-gray-200",children:Object(j.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:"firstName"}),Object(j.jsx)("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:"lastName"}),Object(j.jsx)("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:"phone"})]})}),c.getClients.map((function(e,n){return Object(j.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"px-6 py-4 whitespace-no-wrap text-sm leading-5 font-medium text-gray-900",children:e.firstName}),Object(j.jsx)("td",{className:"px-6 py-4 whitespace-no-wrap text-sm leading-5 font-medium text-gray-900",children:e.lastName}),Object(j.jsx)("td",{className:"px-6 py-4 whitespace-no-wrap text-sm leading-5 font-medium text-gray-900",children:e.phone}),Object(j.jsx)("td",{className:"px-6 py-4 whitespace-no-wrap text-sm leading-5 font-medium text-gray-900",children:Object(j.jsx)("button",{value:e.id,onClick:function(e){return function(e){a(!0),r(!1),t(e.target.value)}(e)},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Edit"})})]},e.id)})}))]})})})})},f=a(20),g=a(18),O=a(46),v=function(e){var t=e.setOpenCreateModal,a=e.setFirstName,n=e.setLastName,s=e.setPhone,i=e.setAvatarUrl,l=e.openCreateModal,c=e.firstName,o=e.lastName,d=e.phone,h=e.avatarUrl,x=e.id,v=Object(f.a)(),N=v.register,w=v.handleSubmit,L=v.errors,S=Object(g.b)(),q={id:x,firstName:c,lastName:o,phone:d,avatarUrl:h},C=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.request(Object(b.gql)(r||(r=Object(u.a)(["\n          mutation AddClient($firstName: String!, $lastName: String!,$phone: String, $avatarUrl: String){\n            addClient(firstName: $firstName, lastName: $lastName, phone: $phone, avatarUrl: $avatarUrl){\n              id\n                firstName\n                lastName\n                phone\n                avatarUrl\n          }\n        }"]))),q);case 2:return t=e.sent,console.log(JSON.stringify(t,void 0,2)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=Object(O.a)(C,{onSuccess:function(){return S.invalidateQueries("clients")}}),$="This field is required",k="Your input exceed maximum length",M="Your input exceed minimum length",E=function(e){return Object(j.jsx)("div",{className:"uncorrect-response",children:e})};return Object(j.jsx)("div",{className:"create-modal",children:l&&Object(j.jsxs)("form",{onSubmit:w((function(e){U.mutate(e,{onSuccess:function(){a(""),n(""),s(""),i(""),console.log(e),t(!1)}})})),children:[Object(j.jsx)("input",{type:"text",placeholder:"firstame",name:"firstName",ref:N({required:!0,maxLength:18,minLength:2}),value:c,onChange:function(e){return a(e.target.value)}}),L.firstname&&"required"===L.firstname.type&&E($),L.firstname&&"maxLength"===L.firstname.type&&E(k),L.firstname&&"minLength"===L.firstname.type&&E(M),Object(j.jsx)("input",{type:"text",placeholder:"lastname",name:"lastName",ref:N({required:!0,maxLength:18,minLength:2}),value:o,onChange:function(e){return n(e.target.value)}}),L.lastname&&"required"===L.lastname.type&&E($),L.lastname&&"maxLength"===L.lastname.type&&E(k),L.lastname&&"minLength"===L.lastname.type&&E(M),Object(j.jsx)("input",{type:"text",placeholder:"phone",name:"phone",ref:N({required:!0,maxLength:15,minLength:8}),value:d,onChange:function(e){return s(e.target.value)}}),L.phone&&"required"===L.phone.type&&E($),L.phone&&"maxLength"===L.phone.type&&E(k),L.phone&&"minLength"===L.phone.type&&E(M),Object(j.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Add"})]})})},N=function(e){var t=e.setOpenEditModal,a=e.setFirstName,n=e.setLastName,r=e.setPhone,i=(e.setAvatarUrl,e.setId),l=e.openEditModal,c=e.firstName,o=e.lastName,d=e.phone,h=e.avatarUrl,x=e.id,v=Object(f.a)(),N=v.register,w=v.handleSubmit,L=v.errors,S=Object(g.b)(),q=l?"edit-modal display-block":"edit-modal display-none",C={id:x,firstName:c,lastName:o,phone:d,avatarUrl:h},U=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.request(Object(b.gql)(s||(s=Object(u.a)(["\n        mutation updateClient($id: ID! $firstName: String!, $lastName: String!,$phone: String, $avatarUrl: String){\n          updateClient(id:$id,  firstName: $firstName, lastName: $lastName, phone: $phone, avatarUrl: $avatarUrl){\n            id\n            firstName\n            lastName\n            phone\n            avatarUrl\n          }\n        }"]))),C);case 2:t=e.sent,console.log(JSON.stringify(t,void 0,2));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=Object(O.a)(U,{onSuccess:function(){return S.invalidateQueries("clients")}}),k="This field is required",M="Your input exceed maximum length",E="Your input exceed minimum length",A=function(e){return Object(j.jsx)("div",{className:"uncorrect-response",children:e})};return Object(j.jsx)(j.Fragment,{children:l&&Object(j.jsx)("div",{className:q,children:Object(j.jsx)("div",{className:"modal-fixed",children:Object(j.jsxs)("form",{onSubmit:w((function(e){t(!1),$.mutate(e,{onSuccess:function(){i(""),a(""),n(""),r("")}})})),children:[Object(j.jsx)("input",{type:"text",placeholder:"firstname",name:"firstname",value:c,ref:N({required:!0,maxLength:18,minLength:2}),onChange:function(e){return a(e.target.value)}}),L.firstname&&"required"===L.firstname.type&&A(k),L.firstname&&"maxLength"===L.firstname.type&&A(M),L.firstname&&"minLength"===L.firstname.type&&A(E),Object(j.jsx)("input",{type:"text",placeholder:"lastname",name:"lastName",value:o,ref:N({required:!0,maxLength:18,minLength:2}),onChange:function(e){return n(e.target.value)}}),L.lastname&&"required"===L.lastname.type&&A(k),L.lastname&&"maxLength"===L.lastname.type&&A(M),L.lastname&&"minLength"===L.lastname.type&&A(E),Object(j.jsx)("input",{type:"text",placeholder:"phone",name:"phone",value:d,ref:N({required:!0,maxLength:15,minLength:8}),onChange:function(e){return r(e.target.value)}}),L.phone&&"required"===L.phone.type&&A(k),L.phone&&"maxLength"===L.phone.type&&A(M),L.phone&&"minLength"===L.phone.type&&A(E),Object(j.jsx)("button",{type:"submit",name:"id",ref:N,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Edit"})]})})})})},y=new b.GraphQLClient("https://test-task.expane.pro/api/graphql",{headers:{}});var w=function(){var e=Object(o.useState)(""),t=Object(c.a)(e,2),a=t[0],n=t[1],r=Object(o.useState)(""),s=Object(c.a)(r,2),i=s[0],l=s[1],d=Object(o.useState)(""),m=Object(c.a)(d,2),u=m[0],p=m[1],h=Object(o.useState)(""),b=Object(c.a)(h,2),f=b[0],g=b[1],O=Object(o.useState)(""),y=Object(c.a)(O,2),w=y[0],L=y[1],S=Object(o.useState)(!1),q=Object(c.a)(S,2),C=q[0],U=q[1],$=Object(o.useState)(!1),k=Object(c.a)($,2),M=k[0],E=k[1];return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsxs)("div",{className:"header",children:[Object(j.jsx)("button",{onClick:function(){return E(!M)},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"CreateClient"}),Object(j.jsx)(v,{setOpenCreateModal:E,setFirstName:n,setLastName:l,setPhone:p,setAvatarUrl:g,openCreateModal:M,firstName:a,lastName:i,phone:u,avatarUrl:f,id:w})]}),Object(j.jsxs)("div",{className:"flex justify-center mt-8",children:[Object(j.jsx)(x,{setId:L,setOpenEditModal:U,setOpenCreateModal:E}),Object(j.jsx)(N,{setOpenEditModal:U,setFirstName:n,setLastName:l,setPhone:p,setAvatarUrl:g,setId:L,openEditModal:C,firstName:a,lastName:i,phone:u,avatarUrl:f,id:w})]})]})},L=a(44),S=(a(40),a(28)),q=new L.a;l.a.render(Object(j.jsxs)(g.a,{client:q,children:[Object(j.jsx)(w,{}),Object(j.jsx)(S.ReactQueryDevtools,{initialIsOpen:!0})]}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.433fd49e.chunk.js.map